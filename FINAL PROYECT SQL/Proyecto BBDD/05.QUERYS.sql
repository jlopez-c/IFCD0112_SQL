-- 1.Muestra la cantidad de img por destinos
	SELECT 000_nomDestino, COUNT( 001_IMAGENES.000_idDestino ) AS numImg
	FROM 000_DESTINOS, 001_IMAGENES
	WHERE 000_DESTINOS.000_idDestino =  001_IMAGENES.000_idDestino
	GROUP BY 000_nomDestino;

-- 2.Mostrar el nombre de laS categoriaS en la que la imagenes se hayan subido en "Marzo".
	SELECT 400_nomCategoria
	FROM 400_CATEGORIAS, 002_DESTINOSCATEGORIAS, 000_DESTINOS, 001_IMAGENES
	WHERE 400_CATEGORIAS.400_idCategoria = 002_DESTINOSCATEGORIAS.400_idCategoria
	AND 000_DESTINOS.000_idDestino =  002_DESTINOSCATEGORIAS.000_idDestino
	AND 000_DESTINOS.000_idDestino =  001_IMAGENES.000_idDestino
	AND MONTH ( 001_fechaSubida ) = 3;

-- 3.Mostrar alfabeticamente el nombre de todas las ciudades que sean capitales en el continente EUROPA Y AFRICA.
	SELECT 111_nomCiudad
	FROM 111_CIUDADES, 110_PAISES, 600_CONTINENTES
	WHERE 110_PAISES.110_idPais = 111_CIUDADES.110_idPais
	AND 600_CONTINENTES.600_idContinente = 110_PAISES.600_idContinente
	AND 111_bCapital = TRUE
	AND ( 600_nomContinente = "EUROPA" 
	OR 600_nomContinente = "AFRICA" )
    ORDER BY 111_nomCiudad ASC;

-- 4.MOSTRAR Nombre y extension del CONTINENTE MAS GRANDE Y QUE PAISES LO CONFORMAN.
	SELECT 600_nomContinente, 600_extensionKm2, 110_nomPais
	FROM 600_CONTINENTES, 110_PAISES
	WHERE 600_CONTINENTES.600_idContinente = 110_PAISES.600_idContinente
	AND 600_extensionKm2 >= ALL (
		SELECT 600_extensionKm2
		FROM 600_CONTINENTES );

-- 5.MOSTRAR LA SUMA DE LAS EXTENSIONES DE TODOS LOS PAISES QUE COMIENCEN POR "E" Y NO PERTENEZCAN AL CONTINENTE EUROPA
	SELECT SUM( 110_extensionKm2 ) AS sumaExtensionesKM2
	FROM 110_PAISES, 600_CONTINENTES
	WHERE 600_CONTINENTES.600_idContinente = 110_PAISES.600_idContinente
	AND 600_nomContinente <> "EUROPA"
	AND 110_nomPais LIKE "E%";

-- 6.QUE USUARIOS SON AMIGOS Y HAN PROPUESTO DESTINOS EN LA CIUDAD DE BUDAPEST.
	SELECT DISTINCT 300_USUARIOS.300_idUsu, 300_nomUsu
	FROM 300_USUARIOS, 310_AMISTADES, 000_DESTINOS, 111_CIUDADES
	WHERE 300_USUARIOS.300_idUsu = 310_AMISTADES.300_idUsu
	AND 300_USUARIOS.300_idUsu = 000_DESTINOS.300_idUsu
	AND  000_DESTINOS.111_idCiudad = 111_CIUDADES.111_idCiudad
	AND 111_nomCiudad = "Budapest";

-- 7.QUE MEDIA DE PAISES TIENEN EL VALOR DE SU MONEDA POR DEBAJO DEL DOLAR.  
-- QUERY ANIDADA DE CAMPO
	SELECT( COUNT( 110_idPais ) * 100 / ( SELECT COUNT( 110_idPais ) 
			FROM 110_PAISES ) ) AS porcentajeMedioPaises						
	FROM 110_PAISES, 100_DIVISAS
	WHERE 100_DIVISAS.100_idDivisa = 110_PAISES.100_idDivisa 
	AND 100_divisaDolares < 100_dolaresDivisa;

-- 8.MUESTRA EL NOMBRE DE LAS CIUDADES QUE EMPIECEN POR 'B' DE LOS PAISES EN LOS QUE SU DIVISA EQUIVALE A GANANCIAS AL CAMBIO A DOLARES, SI HAY MONEDAS QUE NO TIENEN PAIS, MUESTRALAS TAMBIEN.
	SELECT 100_nomDivisa, 110_nomPais, 111_nomCiudad, 100_divisaDolares
	FROM 110_PAISES
	INNER JOIN 111_CIUDADES
	ON 110_PAISES.110_idPais = 111_CIUDADES.110_idPais
	RIGHT JOIN  100_DIVISAS
	ON 100_DIVISAS.100_idDivisa = 110_PAISES.100_idDivisa
	WHERE( 111_nomCiudad LIKE "B%"
	OR 111_idCiudad IS NULL )
	AND 100_divisaDolares > 100_dolaresDivisa;

-- 9.QUE USUARIOS NO HAN HECHO NADA
	SELECT 300_nomUsu, 300_apeUsu, 300_email, 300_descUsu
	FROM 300_USUARIOS
	LEFT JOIN 000_DESTINOS
	ON 300_USUARIOS.300_idUsu = 000_DESTINOS.300_idUsu
	LEFT JOIN 001_IMAGENES
	ON 300_USUARIOS.300_idUsu = 001_IMAGENES.300_idUsu
	LEFT JOIN 320_FOROS
	ON 300_USUARIOS.300_idUsu = 320_FOROS.300_idUsu
	LEFT JOIN 310_AMISTADES
	ON 300_USUARIOS.300_idUsu = 310_AMISTADES.300_idUsu
	WHERE 000_DESTINOS.300_idUsu IS NULL
	AND 001_IMAGENES.300_idUsu IS NULL
	AND 320_FOROS.300_idUsu IS NULL
	AND 310_AMISTADES.300_idUsu IS NULL;

-- 10.EN QUE COORDENADAS ( 500_latitud, 500_longitud ) SE ENCUENTRA LA CIUDAD DONDE ESTA EL DESTINO CON MAYOR NUMERO DE CATEGORIAS ASIGNADAS

	SELECT 500_latitud, 500_longitud, 111_nomCiudad, 000_nomDestino, COUNT( 002_DESTINOSCATEGORIAS.400_idCategoria ) AS numCategorias
	FROM 500_REGIONESHORARIAS, 111_CIUDADES, 000_DESTINOS, 400_CATEGORIAS, 002_DESTINOSCATEGORIAS 
	WHERE 500_REGIONESHORARIAS.500_idHorario = 111_CIUDADES.500_idHorario
	AND 111_CIUDADES.111_idCiudad = 000_DESTINOS.111_idCiudad
	AND 000_DESTINOS.000_idDestino = 002_DESTINOSCATEGORIAS.000_idDestino
	AND 400_CATEGORIAS.400_idCategoria = 002_DESTINOSCATEGORIAS.400_idCategoria
	HAVING numCategorias >= ALL (
		SELECT COUNT( 002_DESTINOSCATEGORIAS.400_idCategoria ) AS numCategorias2
		FROM 500_REGIONESHORARIAS, 111_CIUDADES, 000_DESTINOS, 400_CATEGORIAS, 002_DESTINOSCATEGORIAS 
		WHERE 500_REGIONESHORARIAS.500_idHorario = 111_CIUDADES.500_idHorario
		AND 111_CIUDADES.111_idCiudad = 000_DESTINOS.111_idCiudad
		AND 000_DESTINOS.000_idDestino = 002_DESTINOSCATEGORIAS.000_idDestino
		AND 400_CATEGORIAS.400_idCategoria = 002_DESTINOSCATEGORIAS.400_idCategoria );
	
	-- LA QUERY DA UN RESULTADO PERO NO ES CORRECTO
		-- SEGUN MIS DATOS INTRODUCIDOS LA CIUDAD DEVERIA SER BUDAPEST Y EL DESTINO "Baños Széchenyi"
	
